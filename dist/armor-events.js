// armor-events v0.1.2 Tue Jul 24 2018  
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ArmorEvents=e():t.ArmorEvents=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r=n(1),o=n(4),i=n(5),c=function(t){return t&&t.__esModule?t:{default:t}}(n(6));t.exports={forward:r.forward,forwardOnce:r.forwardOnce,listenTo:i.listenTo,listenToOnce:i.listenToOnce,off:o.off,on:i.on,once:i.once,stopForwarding:r.stopForwarding,stopListening:o.stopListening,trigger:c.default}},function(t,e,n){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.forward=function(t,e,n){return l(t,e,n,this,!1)},e.forwardOnce=function(t,e,n){return l(t,e,n,this,!0)},e.stopForwarding=function(t,e,n){var r=this._listeningTo;if(!r)return this;for(var c=t?[t._listenId]:(0,o.keys)(r),l=0;l<c.length;l++){var s=r[c[l]];if(!s)break;if(null==e)s.obj.off(e,void 0===n?null:n,{action:i.ACTION_FORWARD});else{var u=(0,o.reduceArgs)(e,n),a=u[0];for(var f in a)void 0===a[f]&&(a[f]=null);s.obj.off(a,{action:i.ACTION_FORWARD})}}(0,o.keys)(r).length||(this._listeningTo=void 0);return this};var o=n(2),i=n(3);function c(t,e,n,i){if(void 0!=n&&"object"===(void 0===n?"undefined":r(n)))return t;void 0===n&&(n=null);var c=void 0,l=i.listener,s=i.once;if("all"===e)c=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];l.trigger.apply(l,[null===n?t:n].concat("all"===n?[t].concat(r):r))};else{var u=null===n?e:n;c=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];l.trigger.apply(l,[u].concat("all"===u?[e].concat(n):n))}}return c._forwardTo=n,s?l.listenTo(t,(0,o.onceApi)({},e,c,(0,o.bind)(l.stopForwarding,l,t))):l.listenTo(t,e,c),t}function l(t,e,n,r,i){if(!t)return r;if(void 0==e)c(t,"all",n,{listener:r,once:i});else{var l=(0,o.reduceArgs)(e,n)[0];(0,o.iterateApi)(c,t,l,{listener:r,once:i})}return r}},function(t,e,n){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.reduceArgs=function(t,e,n){var o={};"object"===(void 0===t?"undefined":r(t))&&void 0!=t?(o=t,n=e):null==t?n=e:o[t]=e;return[o,n]},e.onceApi=function(t,e,n,r){if(n){var o=t[e]=function(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}(function(){r(e,o),n.apply(this,arguments)});o._callback=n}return t},e.iterateApi=function t(e,n,r,i,c){var l=void 0;var s=void 0;if(arguments.length<5)for(l in r)n=t(e,n,l,r[l],i);else if("string"==typeof r&&o.test(r))for(l in s=r.split(o))n=e(n,s[l],i,c);else n=e(n,r,i,c);return n},e.uniqueId=function(t){return t+i++},e.keys=function(t){var e=[];if(!t)return e;for(var n in t)e.push(n);return e},e.bind=function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return function(){return t.apply(e,[].concat(r,Array.prototype.slice.call(arguments)))}};var o=e.EVENT_SPLITTER=/\s+/;var i=0},function(t,e,n){"use strict";e.__esModule=!0,e.ACTION_LISTEN=e.ACTION_FORWARD=e.createListenId=e.EVENT_SPLITTER=void 0,e.Listening=function(t){var e=t.listenId,n=t.listeningTo,r=t.target,o=t.targetListenId,i=t.count;return{count:void 0===i?0:i,id:e,listeningTo:n,obj:r,objId:o}};var r=n(2);e.EVENT_SPLITTER=/\s+/,e.createListenId=function(){return(0,r.uniqueId)("l")};e.ACTION_FORWARD="forward",e.ACTION_LISTEN="listen"},function(t,e,n){"use strict";e.__esModule=!0,e.off=function(t,e,n){if(!this._events)return this;if(null==t){var o=n||{},i=o.context,l=o.action;this._events=c(this._events,t,e,{context:i,listeners:this._listeners,action:l})}else{var s=(0,r.reduceArgs)(t,e,n),u=s[0],a=s[1],f=a||{},d=f.context,v=f.action;this._events=(0,r.iterateApi)(c,this._events,u,{context:d,listeners:this._listeners,action:v})}return this},e.stopListening=function(t,e,n,i){var c=this._listeningTo;if(!c)return this;for(var l=t?[t._listenId]:(0,r.keys)(c),s=0;s<l.length;s++){var u=c[l[s]];if(!u)break;if(null==e)u.obj.off(e,n,{context:i,action:o.ACTION_LISTEN});else{var a=(0,r.reduceArgs)(e,n,i),f=a[0],d=a[1];u.obj.off(f,{context:d,action:o.ACTION_LISTEN})}}(0,r.keys)(c).length||(this._listeningTo=void 0);return this};var r=n(2),o=n(3);function i(t){var e=t.callback._forwardTo;return void 0===e&&t.callback._callback&&(e=t.callback._callback._forwardTo),e}function c(t,e,n,c){if(t){var l=0,s=void 0,u=c.context,a=c.listeners,f=c.action;if(e||void 0!==n||u){for(var d=e?[e]:(0,r.keys)(t);l<d.length;l++){var v=t[e=d[l]];if(!v)break;for(var p=[],y=0;y<v.length;y++){var b=v[y],_=!1,g=i(b);f===o.ACTION_FORWARD?(void 0===g||u&&u!==b.context||n!==g&&n!==b.callback)&&(_=!0):f===o.ACTION_LISTEN?(void 0!==g||u&&u!==b.context||void 0!==n&&n!==b.callback&&n!==b.callback._callback)&&(_=!0):(void 0!==n&&n!==b.callback&&n!==b.callback._callback&&(void 0===g||n!==g)||u&&u!==b.context)&&(_=!0),_?p.push(b):(s=b.listening)&&0==--s.count&&(delete a[s.id],delete s.listeningTo[s.objId])}p.length?t[e]=p:delete t[e]}return(0,r.keys)(t).length?t:void 0}for(var h=(0,r.keys)(a);l<h.length;l++)delete a[(s=a[h[l]]).id],delete s.listeningTo[s.objId]}}},function(t,e,n){"use strict";e.__esModule=!0,e.on=function(t,e,n){var r=(0,o.reduceArgs)(t,e,n),c=r[0],l=r[1];return this._events=(0,o.iterateApi)(i,this._events||{},c,{context:l,ctx:this}),this},e.once=function(t,e,n){var r=(0,o.reduceArgs)(t,e,n),i=r[0],c=r[1],l=(0,o.iterateApi)(o.onceApi,{},i,(0,o.bind)(this.off,this));return this.on(l,c)},e.listenTo=function(t,e,n,c){if(!t)return this;var l=t._listenId||(t._listenId=(0,r.createListenId)()),s=this._listeningTo||(this._listeningTo={}),u=s[l];if(!u){var a=this._listenId||(this._listenId=(0,r.createListenId)());u=s[l]=(0,r.Listening)({listenId:a,listeningTo:s,target:t,targetListenId:l,count:0});var f=t._listeners||(t._listeners={});f[a]=u}var d=(0,o.reduceArgs)(e,n,c),v=d[0],p=d[1];return t._events=(0,o.iterateApi)(i,t._events||{},v,{context:p,ctx:this,listening:u}),this},e.listenToOnce=function(t,e,n,r){if(!t)return this;var i=(0,o.reduceArgs)(e,n,r),c=i[0],l=i[1],s=(0,o.iterateApi)(o.onceApi,{},c,(0,o.bind)(this.stopListening,this,t));return this.listenTo(t,s,l)};var r=n(3),o=n(2);function i(t,e,n,r){if(n){var o=t[e]||(t[e]=[]),i=r.context,c=r.ctx,l=r.listening;l&&l.count++,o.push({callback:n,context:i,ctx:i||c,listening:l})}return t}},function(t,e,n){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){if(!this._events)return this;for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];"object"===(void 0===t?"undefined":r(t))&&void 0!=t?(0,o.iterateApi)(c,this._events,t,n):(0,o.iterateApi)(c,this._events,t,void 0,n);return this};var o=n(2);function i(t,e){if(t){var n=[void 0,-1,t.length],r=n[0],o=n[1],i=n[2],c=e[0],l=e[1],s=e[2];switch(e.length){case 0:for(;++o<i;)(r=t[o]).callback.call(r.ctx);return;case 1:for(;++o<i;)(r=t[o]).callback.call(r.ctx,c);return;case 2:for(;++o<i;)(r=t[o]).callback.call(r.ctx,c,l);return;case 3:for(;++o<i;)(r=t[o]).callback.call(r.ctx,c,l,s);return;default:for(;++o<i;)(r=t[o]).callback.apply(r.ctx,e);return}}}function c(t,e,n,r){return i(t[e],[].concat(r,[n])),"all"!==e&&i(t.all,[e].concat(r,[n])),t}}])});